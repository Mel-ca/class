{"ast":null,"code":"import _defineProperty from \"/home/moringa/Desktop/Class-Schedule-React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { STUDENT_USER_LOADED, STUDENT_USER_FAILED, TM_USER_LOADED, TM_USER_FAILED, LOGIN_SUCCESS, LOGIN_FAILED, LOGOUT_SUCCESS, REGISTER_FUSER_SUCCESS, REGISTER_FUSER_FAILED, REGISTER_CUSER_SUCCESS, REGISTER_CUSER_FAILED } from \"../actions/type\";\nvar initialState = {\n  token: localStorage.getItem('token'),\n  isAuthenticated: false,\n  isStudent: null,\n  isLoading: false,\n  user: null\n};\nexport var authReducer = function authReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case REGISTER_CUSER_SUCCESS:\n    case REGISTER_FUSER_SUCCESS:\n      localStorage.setItem('token', action.payload.token);\n      return _objectSpread(_objectSpread(_objectSpread({}, state), action.payload), {}, {\n        isAuthenticated: true,\n        isStudent: action.payload.user.is_student,\n        isLoading: false\n      });\n\n    case STUDENT_USER_LOADED:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isAuthenticated: true,\n        isStudent: true,\n        user: action.payload\n      });\n\n    case TM_USER_LOADED:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isAuthenticated: true,\n        isLoading: false,\n        isStudent: false,\n        user: action.payload\n      });\n\n    case LOGIN_SUCCESS:\n      localStorage.setItem('token', action.payload.token);\n      return _objectSpread(_objectSpread(_objectSpread({}, state), action.payload), {}, {\n        isAuthenticated: true,\n        isLoading: false,\n        isStudent: action.payload.is_student\n      });\n\n    case REGISTER_CUSER_FAILED:\n    case REGISTER_FUSER_FAILED:\n    case LOGIN_FAILED:\n      localStorage.removeItem('token');\n      return _objectSpread(_objectSpread({}, state), {}, {\n        token: null,\n        isStudent: null,\n        isAuthenticated: false,\n        isLoading: false\n      });\n\n    case STUDENT_USER_FAILED:\n    case TM_USER_FAILED:\n    case LOGOUT_SUCCESS:\n      localStorage.removeItem('token');\n      return _objectSpread(_objectSpread({}, state), {}, {\n        token: null,\n        isStudent: null,\n        isAuthenticated: false,\n        isLoading: false\n      });\n  }\n\n  return state;\n};\nexport default authReducer;","map":{"version":3,"names":["STUDENT_USER_LOADED","STUDENT_USER_FAILED","TM_USER_LOADED","TM_USER_FAILED","LOGIN_SUCCESS","LOGIN_FAILED","LOGOUT_SUCCESS","REGISTER_FUSER_SUCCESS","REGISTER_FUSER_FAILED","REGISTER_CUSER_SUCCESS","REGISTER_CUSER_FAILED","initialState","token","localStorage","getItem","isAuthenticated","isStudent","isLoading","user","authReducer","state","action","type","setItem","payload","is_student","removeItem"],"sources":["/home/moringa/Desktop/Class-Schedule-React/src/reducers/authReducer.js"],"sourcesContent":["import { STUDENT_USER_LOADED, STUDENT_USER_FAILED, TM_USER_LOADED,\n    TM_USER_FAILED, LOGIN_SUCCESS, LOGIN_FAILED,LOGOUT_SUCCESS, REGISTER_FUSER_SUCCESS,\n    REGISTER_FUSER_FAILED, REGISTER_CUSER_SUCCESS, REGISTER_CUSER_FAILED\n} from \"../actions/type\"\n\nconst initialState={\n    token:localStorage.getItem('token'),\n    isAuthenticated:false,\n    isStudent:null,\n    isLoading:false,\n    user:null\n}\n\nexport const authReducer=(state=initialState, action)=>{\n    switch(action.type){\n        case REGISTER_CUSER_SUCCESS:\n        case REGISTER_FUSER_SUCCESS:\n            localStorage.setItem('token', action.payload.token)\n            return {\n                ...state,\n                ...action.payload,\n                isAuthenticated:true,\n                isStudent:action.payload.user.is_student,\n                isLoading:false\n            }\n        case STUDENT_USER_LOADED:\n            return{\n                ...state,\n                isAuthenticated:true,\n                isStudent:true,\n                user:action.payload\n            }\n            case TM_USER_LOADED:\n                return {\n                    ...state,\n                    isAuthenticated:true,\n                    isLoading:false,\n                    isStudent:false,\n                    user:action.payload\n                }\n\n        case LOGIN_SUCCESS:\n            localStorage.setItem('token', action.payload.token)\n            return {\n                ...state,\n                ...action.payload,\n                isAuthenticated:true,\n                isLoading:false,\n                isStudent:action.payload.is_student,\n                \n            }\n\n        case REGISTER_CUSER_FAILED:\n        case REGISTER_FUSER_FAILED:\n        case LOGIN_FAILED:\n            localStorage.removeItem('token')\n            return{\n                ...state,\n                token:null,\n                isStudent:null,\n                isAuthenticated:false,\n                isLoading:false\n            }\n\n            case STUDENT_USER_FAILED:\n            case TM_USER_FAILED:\n            case LOGOUT_SUCCESS:\n                localStorage.removeItem('token')\n                return {\n                    ...state,\n                    token:null,\n                    isStudent:null,\n                    isAuthenticated:false,\n                    isLoading:false,\n                }\n    }\n    return state;\n}\n\n\nexport default authReducer"],"mappings":";;;;;;AAAA,SAASA,mBAAT,EAA8BC,mBAA9B,EAAmDC,cAAnD,EACIC,cADJ,EACoBC,aADpB,EACmCC,YADnC,EACgDC,cADhD,EACgEC,sBADhE,EAEIC,qBAFJ,EAE2BC,sBAF3B,EAEmDC,qBAFnD,QAGO,iBAHP;AAKA,IAAMC,YAAY,GAAC;EACfC,KAAK,EAACC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADS;EAEfC,eAAe,EAAC,KAFD;EAGfC,SAAS,EAAC,IAHK;EAIfC,SAAS,EAAC,KAJK;EAKfC,IAAI,EAAC;AALU,CAAnB;AAQA,OAAO,IAAMC,WAAW,GAAC,SAAZA,WAAY,GAA8B;EAAA,IAA7BC,KAA6B,uEAAvBT,YAAuB;EAAA,IAATU,MAAS;;EACnD,QAAOA,MAAM,CAACC,IAAd;IACI,KAAKb,sBAAL;IACA,KAAKF,sBAAL;MACIM,YAAY,CAACU,OAAb,CAAqB,OAArB,EAA8BF,MAAM,CAACG,OAAP,CAAeZ,KAA7C;MACA,qDACOQ,KADP,GAEOC,MAAM,CAACG,OAFd;QAGIT,eAAe,EAAC,IAHpB;QAIIC,SAAS,EAACK,MAAM,CAACG,OAAP,CAAeN,IAAf,CAAoBO,UAJlC;QAKIR,SAAS,EAAC;MALd;;IAOJ,KAAKjB,mBAAL;MACI,uCACOoB,KADP;QAEIL,eAAe,EAAC,IAFpB;QAGIC,SAAS,EAAC,IAHd;QAIIE,IAAI,EAACG,MAAM,CAACG;MAJhB;;IAMA,KAAKtB,cAAL;MACI,uCACOkB,KADP;QAEIL,eAAe,EAAC,IAFpB;QAGIE,SAAS,EAAC,KAHd;QAIID,SAAS,EAAC,KAJd;QAKIE,IAAI,EAACG,MAAM,CAACG;MALhB;;IAQR,KAAKpB,aAAL;MACIS,YAAY,CAACU,OAAb,CAAqB,OAArB,EAA8BF,MAAM,CAACG,OAAP,CAAeZ,KAA7C;MACA,qDACOQ,KADP,GAEOC,MAAM,CAACG,OAFd;QAGIT,eAAe,EAAC,IAHpB;QAIIE,SAAS,EAAC,KAJd;QAKID,SAAS,EAACK,MAAM,CAACG,OAAP,CAAeC;MAL7B;;IASJ,KAAKf,qBAAL;IACA,KAAKF,qBAAL;IACA,KAAKH,YAAL;MACIQ,YAAY,CAACa,UAAb,CAAwB,OAAxB;MACA,uCACON,KADP;QAEIR,KAAK,EAAC,IAFV;QAGII,SAAS,EAAC,IAHd;QAIID,eAAe,EAAC,KAJpB;QAKIE,SAAS,EAAC;MALd;;IAQA,KAAKhB,mBAAL;IACA,KAAKE,cAAL;IACA,KAAKG,cAAL;MACIO,YAAY,CAACa,UAAb,CAAwB,OAAxB;MACA,uCACON,KADP;QAEIR,KAAK,EAAC,IAFV;QAGII,SAAS,EAAC,IAHd;QAIID,eAAe,EAAC,KAJpB;QAKIE,SAAS,EAAC;MALd;EAtDZ;;EA8DA,OAAOG,KAAP;AACH,CAhEM;AAmEP,eAAeD,WAAf"},"metadata":{},"sourceType":"module"}