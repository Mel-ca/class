{"ast":null,"code":"import axios from \"axios\";\nimport { LOGIN_SUCCESS, LOGIN_FAILED, REGISTER_CUSER_SUCCESS, REGISTER_CUSER_FAILED, LOGOUT_SUCCESS } from \"../actions/type\";\nexport var create_studentuser = function create_studentuser(_ref) {\n  var username = _ref.username,\n      email = _ref.email,\n      password = _ref.password,\n      password2 = _ref.password2;\n  return function (dispatch) {\n    var config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    var body = JSON.stringify({\n      username: username,\n      email: email,\n      password: password,\n      password2: password2\n    });\n    axios.post('https://neapi.herokuapp.com/api/signup/student/', body, config).then(function (res) {\n      dispatch({\n        type: REGISTER_CUSER_SUCCESS,\n        payload: res.data\n      });\n      console.log(res.data);\n    }).catch(function (err) {\n      dispatch({\n        type: REGISTER_CUSER_FAILED\n      });\n      console.log(err.response.data);\n    });\n  };\n};\nexport var login = function login(_ref2) {\n  var username = _ref2.username,\n      password = _ref2.password;\n  return function (dispatch) {\n    var config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    var body = JSON.stringify({\n      username: username,\n      password: password\n    });\n    axios.post('https://neapi.herokuapp.com/api/login/', body, config).then(function (response) {\n      dispatch({\n        type: LOGIN_SUCCESS,\n        payload: response.data\n      });\n    }).catch(function (err) {\n      dispatch({\n        type: LOGIN_FAILED\n      });\n    });\n  };\n};\nexport var logout = function logout() {\n  return function (dispatch, getState) {\n    var token = getState().auth.token;\n    var config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n\n    if (token) {\n      config.headers['Authorization'] = \"Token \".concat(token);\n    }\n\n    axios.post('https://neapi.herokuapp.com/api/logout/', null, config).then(function (res) {\n      dispatch({\n        type: LOGOUT_SUCCESS\n      });\n    }).catch(function (err) {\n      console.log(err.response.data);\n    });\n  };\n};","map":{"version":3,"names":["axios","LOGIN_SUCCESS","LOGIN_FAILED","REGISTER_CUSER_SUCCESS","REGISTER_CUSER_FAILED","LOGOUT_SUCCESS","create_studentuser","username","email","password","password2","dispatch","config","headers","body","JSON","stringify","post","then","res","type","payload","data","console","log","catch","err","response","login","logout","getState","token","auth"],"sources":["/home/moringa/Desktop/Class-Schedule-React/src/actions/auth.js"],"sourcesContent":["import axios from \"axios\";\nimport { \n     LOGIN_SUCCESS, LOGIN_FAILED, REGISTER_CUSER_SUCCESS, REGISTER_CUSER_FAILED, LOGOUT_SUCCESS\n} from \"../actions/type\"\n\n\n    \n\nexport const create_studentuser=({username, email,password, password2})=>(dispatch)=>{\n    const config={\n        headers:{\n            'Content-Type':'application/json'\n        }\n    }\n    const body=JSON.stringify({username, email, password, password2})\n\n    axios.post('https://neapi.herokuapp.com/api/signup/student/', body, config)\n    .then(res =>{\n        dispatch({\n            type:REGISTER_CUSER_SUCCESS,\n            payload:res.data\n        })\n        console.log(res.data)\n    }).catch(err =>{\n        dispatch({\n            type:REGISTER_CUSER_FAILED\n        })\n        console.log(err.response.data)\n    })\n}\n\n\n\nexport const login=({username, password})=>(dispatch)=>{\n    const config={\n        headers:{\n            'Content-Type':'application/json'\n        }\n    }\n    const body=JSON.stringify({username, password})\n\n    axios.post('https://neapi.herokuapp.com/api/login/', body, config)\n    .then(response =>{\n        dispatch({\n            type:LOGIN_SUCCESS,\n            payload:response.data\n        })\n    }).catch(err =>{\n        dispatch({\n            type:LOGIN_FAILED\n        })\n    })\n\n}\nexport const logout=()=>(dispatch, getState)=>{\n    const token=getState().auth.token\n    const config={\n        headers:{\n            'Content-Type':'application/json'\n        }\n    }\n\n    if(token){\n        config.headers['Authorization']= `Token ${token}`\n    }\n    axios.post('https://neapi.herokuapp.com/api/logout/', null, config)\n    .then(res =>{\n        dispatch({\n            type:LOGOUT_SUCCESS\n        })\n    }).catch(err =>{\n        console.log(err.response.data)\n    })\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}